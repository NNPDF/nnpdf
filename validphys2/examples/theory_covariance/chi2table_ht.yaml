# This is the driver template for vp-comparefits. It consists on a validphys
# runcard where some settings are missing and are to be filled by the
# vp-comparefits script. The settings below are a sample of such settings, kept
# for reference
#
# meta:
#   title: The title of the Report
#   keywords: [report_template]
#   author: NNPDF Collaboration
#
# current:
#   fit: {id: id_of_the_base_fit}
#   pdf: {id: id_of_the_base_fit, label: "Current Fit"}
#   theory:
#     from_: fit
#   theoryid:
#     from_: theory
#   speclabel: "Current Fit"
#
# reference:
#   fit: {id: id_of_the_reference_fit}
#   pdf: {id: id_of_the_reference_fit, label: "Reference Fit" }
#   theory:
#     from_: fit
#   theoryid:
#     from_: theory
#   speclabel: "Reference Fit"

pdfs:
  - {id: "240816-06-7-01-lc", label: "HT low cuts"}
  - {id: "240812-02-ABMP-lnv", label: "HT mid cuts"}
  - {id: "240812-04-ABMP-lnv", label: "HT std. cuts"}
  - {id: "240819_nnpdf40_lowcuts", label: "no HYT low cuts"}
  - {id: "240807-midcuts", label: "no HT mid cuts"}
  - {id: "NNPDF40_nnlo_as_01180_qcd", label: "no HT std cuts (NNPDF40)"}

fits:
  - {id: "240816-06-7-01-lc", label: "HT low cuts"}
  - {id: "240812-02-ABMP-lnv", label: "HT mid cuts"}
  - {id: "240812-04-ABMP-lnv", label: "HT std. cuts"}
  - {id: "240819_nnpdf40_lowcuts", label: "no HYT low cuts"}
  - {id: "240807-midcuts", label: "no HT mid cuts"}
  - {id: "NNPDF40_nnlo_as_01180_qcd", label: "no HT std cuts (NNPDF40)"}

use_cuts: "fromfit"
use_weights_in_covmat: False
use_thcovmat_if_present: True

Q: 1.651

#template: report.md

description:
  from_: fit

dataset_inputs:
  from_: fit

#dataspecs:
#  - theoryid:
#      from_: current
#    pdf:
#      from_: current
#    fit:
#      from_: current
#    speclabel:
#      from_: current
#
#  - theoryid:
#      from_: reference
#    pdf:
#      from_: reference
#    fit:
#      from_: reference
#    speclabel:
#      from_: reference

Datanorm:
  normalize_to: data

DataGroups:
  - metadata_group: nnpdf31_process
  - metadata_group: experiment

ProcessGroup:
    metadata_group: nnpdf31_process

template_text: |
  Summary
  -------
  {@ summarise_fits @}

  {@with DataGroups@}
  $\chi^2$ by {@processed_metadata_group@}
  ----------------------------------------
  {@plot_fits_groups_data_chi2@}
  {@endwith@}

  $\chi^2$ by dataset
  -------------------
  ### Plot
  {@plot_fits_datasets_chi2@}
  ### Table
  {@ProcessGroup fits_chi2_table(show_total=true)@}

actions_:
  - report(main=true)
